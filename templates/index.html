{% extends 'userbase.html' %}
{% load static %}

{% block content %}
 
<section class="slider_section ">
    <div id="customCarousel1" class="carousel slide" data-ride="carousel">
      <div class="carousel-inner">
        <div class="carousel-item active">
          <div class="container ">
            <div class="row">
              <div class="col-md-7">
                <div class="detail-box">
                  <h1>
                    Blood is meant for circulation. 
                    Donate Blood.
                  </h1>
                  <p>
                    {% comment %} A blood bank is a center where blood gathered as a result of blood donation is stored and preserved for later use in blood transfusion. The term "blood bank" typically refers to a department of a hospital usually within a clinical pathology laboratory where the storage of blood product occurs and where pre-transfusion and blood compatibility testing is performed. However, it sometimes refers to a collection center, and some hospitals also perform collection. {% endcomment %}
                  </p>
                  <div class="btn-box">
                 
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="carousel-item ">
          <div class="container ">
            <div class="row">
              <div class="col-md-7">
                <div class="detail-box">
                  <h1>
                    Every drop counts. 
                    Be a hero.
                  </h1>
                  <p>
                    {% comment %} A blood bank is a center where blood gathered as a result of blood donation is stored and preserved for later use in blood transfusion. The term "blood bank" typically refers to a department of a hospital usually within a clinical pathology laboratory where the storage of blood product occurs and where pre-transfusion and blood compatibility testing is performed. However, it sometimes refers to a collection center, and some hospitals also perform collection. {% endcomment %}
                  </p>
                  <div class="btn-box">
                   
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="carousel-item">
          <div class="container ">
            <div class="row">
              <div class="col-md-7">
                <div class="detail-box">
                  <h1>
                    Share your strength. 
                    Give blood
                  </h1>
                  <p>
                    {% comment %} A blood bank is a center where blood gathered as a result of blood donation is stored and preserved for later use in blood transfusion. The term "blood bank" typically refers to a department of a hospital usually within a clinical pathology laboratory where the storage of blood product occurs and where pre-transfusion and blood compatibility testing is performed. However, it sometimes refers to a collection center, and some hospitals also perform collection. {% endcomment %}
                  </p>
                  <div class="btn-box">
                    
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <ol class="carousel-indicators">
        <li data-target="#customCarousel1" data-slide-to="0" class="active"></li>
        <li data-target="#customCarousel1" data-slide-to="1"></li>
        <li data-target="#customCarousel1" data-slide-to="2"></li>
      </ol>
    </div>

  </section>
  <!-- end slider section -->
</div>


<!-- department section -->


<!-- end department section -->

<!-- about section -->

<section class="about_section layout_margin-bottom">
  <div class="container  ">
    <div class="row">
      <div class="col-md-6 ">
        <div class="img-box">
          <img src="{% static 'assets1/images/about-img.jpg'%}" height="300" width="200" alt="">
        </div>
      </div>
      <div class="col-md-6">
        <div class="detail-box">
          <div class="heading_container">
            <h2>
              About <span>Us</span>
            </h2>
          </div>
          <p>
            In Ghadiarwa-10, we are dedicated to saving lives through our Blood Bank Management System. We connect generous donors with patients in need, ensuring every drop counts. Our platform streamlines the donation process, making it easier to track and manage blood supplies.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- end about section -->

<!-- doctor section -->

<section class="doctor_section layout_padding">
  <div class="container">
    <div class="heading_container heading_center">
      <h2>
       Some of the Donor
      </h2>
      <p class="col-md-10 mx-auto px-0">
        
      </p>
    </div>
    <div class="row">
        {% for i in dv %}
      <div class="col-sm-6 col-lg-4 mx-auto">
        <div class="box">
          <div class="img-box">
            <img src="{{i.admin.profile_pic.url}}" width="150" height="150" alt="">
          </div>
          <div class="detail-box">
          
            <h5>
                {{i.admin.first_name}} {{i.admin.last_name}}
            </h5>
            <p>Gender: {{i.gender}}</p>
            <p>Blood Group: {{i.bloodgroup.bloodgroup}}</p>
            <h6 class="">
              <a href="{% url 'blood-request' i.id %}" class="btn btn-primary">Request</a>
            </h6>
          </div>
        </div>
      </div>{% endfor %}
      
      
    </div>
    
  </div>
</section>

<!-- end doctor section -->

<!-- contact section -->
<section class="contact_section layout_padding">
  <<div class="container">
    <div class="heading_container">
        <h2>Get In Touch</h2>
    </div>
    <div class="row">
        <div class="col-md-8">
            <div class="form_container contact-form">
                {% if messages %}
                    {% for message in messages %}
                        {% if message.tags == 'error' %}
                            <div class="alert alert-warning alert-dismissible fade show" role="alert" style="color: red;">
                                {{message}}
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close" style="color: red;">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        {% endif %}
                    {% endfor %}
                {% endif %}
                {% if messages %}
                    {% for message in messages %}
                        {% if message.tags == 'success' %}
                            <div class="alert alert-warning alert-dismissible fade show" role="alert" style="color: red;">
                                {{message}}
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close" style="color: red;">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        {% endif %}
                    {% endfor %}
                {% endif %}
                <form action="" method="POST" id="contactForm" onsubmit="return validateForm()">
                    {% csrf_token %}
                    <div class="form-row">
                        <div class="col-lg-6">
                            <div>
                                <input type="text" placeholder="Your Name" name="fullname" id="fullname" 
                                    pattern="^[A-Za-z\s]{3,50}$" 
                                    title="Name should contain only letters and spaces, between 3 and 50 characters"
                                    required="true"/>
                                <small class="error" id="nameError" style="color: red;"></small>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div>
                                <input type="tel" placeholder="Phone Number" name="mobno" id="mobno" 
                                    pattern="^[0-9]{10}$"
                                    title="Please enter a valid 10-digit phone number"
                                    required="true"/>
                                <small class="error" id="phoneError" style="color: red;"></small>
                            </div>
                        </div>
                    </div>
                    <div>
                        <input type="email" placeholder="Email" name="email" id="email" 
                            pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                            title="Please enter a valid email address"
                            required="true"/>
                        <small class="error" id="emailError" style="color: red;"></small>
                    </div>
                    <div>
                        <input type="text" class="message-box" placeholder="Message" name="message" required="true"/>
                    </div>
                    <div class="btn_box">
                        <button type="submit">SEND</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
function validateForm() {
    let isValid = true;
    
    // Clear previous error messages
    document.getElementById('nameError').textContent = '';
    document.getElementById('phoneError').textContent = '';
    document.getElementById('emailError').textContent = '';
    
    // Name validation
    const name = document.getElementById('fullname').value;
    if (!/^[A-Za-z\s]{3,50}$/.test(name)) {
        document.getElementById('nameError').textContent = 'Name should contain only letters and spaces (3-50 characters)';
        isValid = false;
    }
    
    // Phone validation
    const phone = document.getElementById('mobno').value;
    if (!/^[0-9]{10}$/.test(phone)) {
        document.getElementById('phoneError').textContent = 'Please enter a valid 10-digit phone number';
        isValid = false;
    }
    
    // Email validation
    const email = document.getElementById('email').value;
    if (!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(email)) {
        document.getElementById('emailError').textContent = 'Please enter a valid email address';
        isValid = false;
    }
    
    return isValid;
}

// Real-time validation
document.getElementById('fullname').addEventListener('input', function() {
    if (this.value.length > 0) {
        if (!/^[A-Za-z\s]{3,50}$/.test(this.value)) {
            document.getElementById('nameError').textContent = 'Name should contain only letters and spaces (3-50 characters)';
        } else {
            document.getElementById('nameError').textContent = '';
        }
    }
});

document.getElementById('mobno').addEventListener('input', function() {
    if (this.value.length > 0) {
        if (!/^[0-9]{10}$/.test(this.value)) {
            document.getElementById('phoneError').textContent = 'Please enter a valid 10-digit phone number';
        } else {
            document.getElementById('phoneError').textContent = '';
        }
    }
});

document.getElementById('email').addEventListener('input', function() {
    if (this.value.length > 0) {
        if (!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(this.value)) {
            document.getElementById('emailError').textContent = 'Please enter a valid email address';
        } else {
            document.getElementById('emailError').textContent = '';
        }
    }
});
</script>
</section>
{% endblock %}